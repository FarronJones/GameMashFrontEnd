document.addEventListener("DOMContentLoaded", () => {
  const userLang = localStorage.getItem("lang") || "en";

  const translations = {
    en: {
      "settings-title": "Settings & Privacy",
      "language-label": "üåê Choose your preferred language:",
      "save-button": "Save Preferences",
      "language-status": "Your current language is: English",
      "faq-title": "FAQ's:",
      "faqText": "Welcome to the FAQ section!",
      "faq-q1": "Can you play this game alone?",
      "faq-a1": "Game Mash is designed for co-op play, where you control two unique characters with distinct abilities. While it's meant to be played with a friend for maximum fun, playing solo is definitely possible.",
      "faq-q2": "How many levels are there?",
      "faq-a2": "There are 3 main levels with unique environments, enemies, and challenges. Each one becomes more difficult as you progress.",
      "faq-q3": "When was this game released?",
      "faq-a3": "Released in 2025, Game Mash was developed by a group of students from Saint Xavier University.",
      "watch-showcase-title": "Watch Game Showcase:",
      "creators-title": "Get to Know the Creators:",
      "frontEnd-title": "Front End",
      "backend-title": "Backend",
      "pm-title": "Project Manager",
      "how-to-play-title": "How to Play:",
      "game-description-text": "In Game Mash, you take control of two quirky characters, each with their own unique powers and abilities. Imagine one being a delicious burger, ready to flip and sizzle, while the other could be anything from a quirky sidekick to an unpredictable element with special skills! Your goal is to work together, using the strengths of each character to overcome challenges, solve puzzles, and defeat any obstacles in your path. Whether it‚Äôs using the burger's tasty moves or the special abilities of the second character, teamwork and strategy are key to success! As you dive deeper into the game, you'll navigate through a variety of levels that test not just your reflexes, but also your logic and coordination. Encounter enemies that require combined efforts to defeat, levers that activate hidden doors, pressure plates that demand synchronized steps, and puzzles that challenge your perception and cooperation. One moment you might need to catapult a teammate across a fiery chasm, the next, time a button press with split-second accuracy to disable a trap. Game Mash isn‚Äôt just a game‚Äîit‚Äôs a chaotic, fun-filled experience that brings players together. Perfect your tag-team skills, master each character‚Äôs moves, and uncover secrets that reward the clever and the bold. Are you ready to mash your way to victory?",
      "welcome-text": "Welcome Back",
      "player-info": "Enter Player Info to Login",
      "email-placeholder": "Email",
      "password-placeholder": "Password",
      "login-button": "Login",
      "forgot-password": "Forgot your password?",
      "or-text": "Or",
      "google-signin": "Sign in with Google",
      "signup-text": "Don't have an account?",
      "signup-link": "Sign up!",
      "welcome-text2": "Welcome to the Community!",
      "share-thoughts-title": "Share Your Thoughts",
      "thought-input": "What's on your mind?",
      "post-button": "Post",
      "recent-thoughts-title": "Recent Thoughts",
      "join-discord-title": "Join Our Discord Server",
      "discord-description": "Stay connected with the community on Discord!",
      "discord-link": "Join Our Discord",
      "signup-heading": "Sign Up",
      "create-account-text": "Create your account",
      "first-name-placeholder": "First Name",
      "last-name-placeholder": "Last Name",
      "username-placeholder": "Username",
      "confirm-password-placeholder": "Confirm Password",
      "choose-avatar-title": "Choose Your Avatar",
      "signup-button": "Sign Up",
      "edit-profile-title": "Edit Profile",
      "update-profile-text": "Update your information",
      "save-changes-button": "Save Changes",
      "settings-title": "Settings",
      "graphics-label": "Graphics Quality:",
      "sound-label": "Sound Volume:",
      "music-label": "Music Volume:",
      "reset-button": "Reset to Default",
      "controls-title": "Controls:",
      "control-w": "W - Move Up",
      "control-s": "S - Move Down",
      "control-a": "A - Move Left",
      "control-d": "D - Move Right",
      "live-chat-title": "Live Chat:",
      "guest-message": "If you want people to see your profile, login/signup.",
      "chat-placeholder": "Type a message...",
      "send-button": "Send",
       "support-title": "Need Help?",
      "support-intro": "Use our virtual assistant on the bottom right or contact our team directly."
    },
    es: {
      "settings-title": "Configuraci√≥n y Privacidad",
      "language-label": "üåê Elige tu idioma preferido:",
      "save-button": "Guardar Preferencias",
      "language-status": "Tu idioma actual es: Espa√±ol",
      "faq-title": "Preguntas Frecuentes:",
      "faqText": "¬°Bienvenido a la secci√≥n de Preguntas Frecuentes!",
      "faq-q1": "¬øPuedes jugar este juego solo?",
      "faq-a1": "Game Mash est√° dise√±ado para jugarse en modo cooperativo, pero tambi√©n puedes jugar solo.",
      "faq-q2": "¬øCu√°ntos niveles hay?",
      "faq-a2": "Hay 3 niveles principales con entornos √∫nicos y enemigos desafiantes.",
      "faq-q3": "¬øCu√°ndo se lanz√≥ este juego?",
      "faq-a3": "Lanzado en 2025, Game Mash fue desarrollado por estudiantes de la Universidad Saint Xavier.",
      "watch-showcase-title": "Ver Presentaci√≥n del Juego:",
      "creators-title": "Conoce a los Creadores:",
      "frontEnd-title": "Frontend",
      "backend-title": "Backend",
      "pm-title": "Gestor del Proyecto",
      "how-to-play-title": "C√≥mo Jugar:",
      "game-description-text": "En Game Mash, controlas a dos personajes extravagantes, cada uno con sus propios poderes y habilidades √∫nicas. ¬°Imagina que uno es una deliciosa hamburguesa, lista para voltear y chisporrotear, mientras que el otro podr√≠a ser cualquier cosa, desde un compa√±ero peculiar hasta un elemento impredecible con habilidades especiales! Tu objetivo es trabajar en equipo, aprovechando las fortalezas de cada personaje para superar desaf√≠os, resolver acertijos y derrotar cualquier obst√°culo en tu camino. Ya sea usando los sabrosos movimientos de la hamburguesa o las habilidades especiales del segundo personaje, el trabajo en equipo y la estrategia son clave para el √©xito. A medida que te adentras m√°s en el juego, navegar√°s por una variedad de niveles que pondr√°n a prueba no solo tus reflejos, sino tambi√©n tu l√≥gica y coordinaci√≥n. Enfrenta enemigos que requieren esfuerzos combinados para ser derrotados, palancas que activan puertas ocultas, placas de presi√≥n que exigen pasos sincronizados y acertijos que desaf√≠an tu percepci√≥n y cooperaci√≥n. En un momento podr√≠as necesitar catapultar a tu compa√±ero a trav√©s de un abismo ardiente, y al siguiente, presionar un bot√≥n con precisi√≥n milim√©trica para desactivar una trampa. Game Mash no es solo un juego: es una experiencia ca√≥tica y divertida que une a los jugadores. Perfecciona tus habilidades en equipo, domina los movimientos de cada personaje y descubre secretos que recompensan a los astutos y valientes. ¬øEst√°s listo para hacer pur√© tu camino hacia la victoria?",
      "welcome-text": "¬°Bienvenido de nuevo",
      "player-info": "Introduce la informaci√≥n del jugador para iniciar sesi√≥n",
      "email-placeholder": "Correo electr√≥nico",
      "password-placeholder": "Contrase√±a",
      "login-button": "Iniciar sesi√≥n",
      "forgot-password": "¬øOlvidaste tu contrase√±a?",
      "or-text": "O",
      "google-signin": "Inicia sesi√≥n con Google",
      "signup-text": "¬øNo tienes una cuenta?",
      "signup-link": "¬°Reg√≠strate!",
      "welcome-text2": "¬°Bienvenido a la Comunidad!",
      "share-thoughts-title": "Comparte tus pensamientos",
      "thought-input": "¬øQu√© est√°s pensando?",
      "post-button": "Publicar",
      "recent-thoughts-title": "Pensamientos recientes",
      "join-discord-title": "√önete a nuestro servidor de Discord",
      "discord-description": "¬°Mantente conectado con la comunidad en Discord!",
      "discord-link": "√önete a nuestro Discord",
      "signup-heading": "Reg√≠strate",
      "create-account-text": "Crea tu cuenta",
      "first-name-placeholder": "Nombre",
      "last-name-placeholder": "Apellido",
      "username-placeholder": "Nombre de usuario",
      "confirm-password-placeholder": "Confirmar contrase√±a",
      "choose-avatar-title": "Elige tu avatar",
      "signup-button": "Reg√≠strate",
      "edit-profile-title": "Editar Perfil",
      "update-profile-text": "Actualiza tu informaci√≥n",
      "save-changes-button": "Guardar Cambios",
      "settings-title": "Ajustes",
      "graphics-label": "Calidad de gr√°ficos:",
      "sound-label": "Volumen de sonido:",
      "music-label": "Volumen de m√∫sica:",
      "reset-button": "Restablecer a valores predeterminados",
      "controls-title": "Controles:",
      "control-w": "W - Mover hacia arriba",
      "control-s": "S - Mover hacia abajo",
      "control-a": "A - Mover a la izquierda",
      "control-d": "D - Mover a la derecha",
      "live-chat-title": "Chat en Vivo:",
      "guest-message": "Si quieres que la gente vea tu perfil, inicia sesi√≥n/reg√≠strate.",
      "chat-placeholder": "Escribe un mensaje...",
      "send-button": "Enviar",
      "support-title": "¬øNecesitas ayuda?",
      "support-intro": "Usa nuestro asistente virtual en la parte inferior derecha o contacta a nuestro equipo directamente."
    },
    fr: {
      "settings-title": "Param√®tres et Confidentialit√©",
      "language-label": "üåê Choisissez votre langue pr√©f√©r√©e :",
      "save-button": "Enregistrer les pr√©f√©rences",
      "language-status": "Votre langue actuelle est : Fran√ßais",
      "faq-title": "FAQ :",
      "faqText": "Bienvenue dans la section FAQ !",
      "faq-q1": "Pouvez-vous jouer √† ce jeu seul ?",
      "faq-a1": "Game Mash est con√ßu pour le jeu coop√©ratif, mais il est √©galement possible d'y jouer en solo.",
      "faq-q2": "Combien de niveaux y a-t-il ?",
      "faq-a2": "Il y a 3 niveaux principaux avec des environnements uniques et des ennemis difficiles.",
      "faq-q3": "Quand ce jeu a-t-il √©t√© publi√© ?",
      "faq-a3": "Sorti en 2025, Game Mash a √©t√© d√©velopp√© par des √©tudiants de l'universit√© Saint Xavier.",
      "watch-showcase-title": "Regarder la D√©monstration du Jeu :",
      "creators-title": "Faites Connaissance avec les Cr√©ateurs :",
      "frontEnd-title": "Frontend",
      "backend-title": "Backend",
      "pm-title": "Chef de Projet",
      "how-to-play-title": "Comment Jouer :",
      "game-description-text": "Dans Game Mash, vous prenez le contr√¥le de deux personnages excentriques, chacun avec ses propres pouvoirs et capacit√©s uniques. Imaginez que l‚Äôun est un d√©licieux burger, pr√™t √† gr√©siller et √† √™tre retourn√©, tandis que l‚Äôautre pourrait √™tre un acolyte loufoque ou un √©l√©ment impr√©visible dot√© de comp√©tences sp√©ciales ! Votre objectif est de coop√©rer en utilisant les forces de chaque personnage pour surmonter des d√©fis, r√©soudre des √©nigmes et vaincre tous les obstacles sur votre chemin. Qu‚Äôil s‚Äôagisse d‚Äôutiliser les mouvements savoureux du burger ou les capacit√©s sp√©ciales du second personnage, le travail d‚Äô√©quipe et la strat√©gie sont essentiels pour r√©ussir ! En progressant dans le jeu, vous traverserez une vari√©t√© de niveaux qui mettront √† l‚Äô√©preuve non seulement vos r√©flexes, mais aussi votre logique et votre coordination. Affrontez des ennemis qui exigent des efforts combin√©s, actionnez des leviers qui ouvrent des portes cach√©es, activez des plaques de pression qui demandent des pas synchronis√©s et r√©solvez des √©nigmes qui d√©fient votre perception et votre coop√©ration. √Ä un moment donn√©, vous devrez peut-√™tre catapulter un co√©quipier par-dessus un gouffre enflamm√©, et le moment suivant, appuyer sur un bouton avec une pr√©cision absolue pour d√©sactiver un pi√®ge. Game Mash n‚Äôest pas qu‚Äôun jeu : c‚Äôest une exp√©rience chaotique et pleine de fun qui rassemble les joueurs. Perfectionnez vos comp√©tences en duo, ma√Ætrisez les mouvements de chaque personnage et d√©couvrez des secrets qui r√©compensent les plus malins et audacieux. √ätes-vous pr√™t √† √©craser votre chemin vers la victoire ?",
      "welcome-text": "Bon retour",
      "player-info": "Entrez les informations du joueur pour vous connecter",
      "email-placeholder": "E-mail",
      "password-placeholder": "Mot de passe",
      "login-button": "Connexion",
      "forgot-password": "Mot de passe oubli√© ?",
      "or-text": "Ou",
      "google-signin": "Se connecter avec Google",
      "signup-text": "Vous n'avez pas de compte ?",
      "signup-link": "Inscrivez-vous !",
      "welcome-text2": "Bienvenue dans la communaut√© !",
      "share-thoughts-title": "Partagez vos pens√©es",
      "thought-input": "√Ä quoi pensez-vous ?",
      "post-button": "Publier",
      "recent-thoughts-title": "Pens√©es r√©centes",
      "join-discord-title": "Rejoignez notre serveur Discord",
      "discord-description": "Restez connect√© avec la communaut√© sur Discord !",
      "discord-link": "Rejoignez notre Discord",
      "signup-heading": "S'inscrire",
      "create-account-text": "Cr√©ez votre compte",
      "first-name-placeholder": "Pr√©nom",
      "last-name-placeholder": "Nom de famille",
      "username-placeholder": "Nom d'utilisateur",
      "confirm-password-placeholder": "Confirmer le mot de passe",
      "choose-avatar-title": "Choisissez votre avatar",
      "signup-button": "S'inscrire",
      "edit-profile-title": "Modifier le Profil",
      "update-profile-text": "Mettez √† jour vos informations",
      "save-changes-button": "Enregistrer les modifications",
      "settings-title": "Param√®tres",
      "graphics-label": "Qualit√© des graphismes:",
      "sound-label": "Volume du son:",
      "music-label": "Volume de la musique:",
      "reset-button": "R√©initialiser par d√©faut",
      "controls-title": "Contr√¥les:",
      "control-w": "W - Monter",
      "control-s": "S - Descendre",
      "control-a": "A - Aller √† gauche",
      "control-d": "D - Aller √† droite",
      "live-chat-title": "Chat en Direct:",
      "guest-message": "Si vous voulez que les gens voient votre profil, connectez-vous/inscrivez-vous.",
      "chat-placeholder": "Tapez un message...",
      "send-button": "Envoyer",
      "support-title": "Besoin d'aide ?",
      "support-intro": "Utilisez notre assistant virtuel en bas √† droite ou contactez directement notre √©quipe."
    }
  };

  const applyPlayTranslations = (lang) => {
    const langMap = translations[lang];
    if (!langMap) return;

    document.getElementById("settingsBtn").textContent = langMap["settings-title"];
    document.querySelector("label[for='graphicsQuality']").textContent = langMap["graphics-label"];
    document.querySelector("label[for='sound']").textContent = langMap["sound-label"];
    document.querySelector("label[for='music']").textContent = langMap["music-label"];
    document.getElementById("resetBtn").textContent = langMap["reset-button"];
    document.querySelector(".controls h2").textContent = langMap["controls-title"];

    const controlItems = document.querySelectorAll(".controls ul li");
    if (controlItems.length === 4) {
      controlItems[0].textContent = langMap["control-w"];
      controlItems[1].textContent = langMap["control-s"];
      controlItems[2].textContent = langMap["control-a"];
      controlItems[3].textContent = langMap["control-d"];
    }

    document.querySelector(".chat h2").textContent = langMap["live-chat-title"];
    document.querySelector(".guest-message").textContent = langMap["guest-message"];
    document.getElementById("chatInput").placeholder = langMap["chat-placeholder"];
    document.getElementById("sendBtn").textContent = langMap["send-button"];
  };

  const applyTranslations = (lang) => {
    const langMap = translations[lang];
    if (!langMap) return;

    Object.keys(langMap).forEach(key => {
      const el = document.getElementById(key);
      if (el) {
        if (el.tagName === "TEXTAREA" && el.placeholder !== undefined) {
          el.placeholder = langMap[key];
        } else if (el.tagName === "A") {
          el.textContent = langMap[key];
        } else if (!el.hasAttribute("data-translate-placeholder")) {
          el.textContent = langMap[key];
        }
      }
    });

    const inputs = document.querySelectorAll('input[data-translate-placeholder]');
    inputs.forEach(input => {
      const key = input.getAttribute('data-translate-placeholder');
      if (langMap[key]) {
        input.placeholder = langMap[key];
      }
    });
  };

  const languageSelect = document.getElementById("language-select");
  const statusMsg = document.getElementById("language-status");
  const saveBtn = document.getElementById("save-button");

  if (languageSelect) languageSelect.value = userLang;
  applyTranslations(userLang);
  applyPlayTranslations(userLang);

  if (saveBtn) {
    saveBtn.addEventListener("click", () => {
      const selectedLang = languageSelect.value;
      localStorage.setItem("lang", selectedLang);
      applyTranslations(selectedLang);
      applyPlayTranslations(selectedLang);
      if (statusMsg) {
        statusMsg.textContent = translations[selectedLang]["language-status"];
      }
      alert("Settings saved successfully!");
    });
  }
});